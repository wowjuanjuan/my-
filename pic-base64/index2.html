<html>
  <head>
    <meta charset="utf-8" />
    <title>通过filereader接口读取文件</title>
    <script src="./index.js"></script>
    <script type="text/javascript">
      function getBase64Image(img) {
        var canvas = document.createElement("canvas");
        canvas.width = img.width;
        canvas.height = img.height;
        var ctx = canvas.getContext("2d");
        ctx.drawImage(img, 0, 0, img.width, img.height);
        var dataURL = canvas.toDataURL("image/png");
        return dataURL;
        // return dataURL.replace("data:image/png;base64,", "");
      }

      function main() {
        var img = document.createElement("img");
        // arr.forEach((val,index)=>{

        // })
        // img.src =
        //   "https://ss1.bdstatic.com/70cFvXSh_Q1YnxGkpoWK1HF6hhy/it/u=3922290090,3177876335&fm=26&gp=0.jpg?v=" +
        //   Math.random(); //此处自己替换本地图片的地址
        img.src = "img/1变身夜.png";
        img.crossOrigin = "anonymous";
        img.onload = function () {
          // debugger;
          var data = getBase64Image(img);
          var img1 = document.createElement("img");
          img1.src = data;
          document.body.appendChild(img1);
          console.log(data);
        };
      }
      main();
    </script>
  </head>

  <body></body>
</html>
